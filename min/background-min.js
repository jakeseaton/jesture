function clear_all(){chrome.storage.sync.clear(),localStorage.clear()}function store_piece(e,t){$.ajax(e,{success:function(e){var o=$(e).find(".piece-text-container").find("h2").html();console.log(o);try{localStorage.setItem(t,o),console.log(localStorage)}catch(c){"QUOTE_EXCEEDED_ERR"==c&&alert("Quote exceeded!")}}})}localStorage.length||chrome.storage.sync.get(function(e){for(item in e){var t=e[item];"piece"==t.Type&&store_piece(t.Url,t.Title)}}),chrome.runtime.onMessage.addListener(function e(t,o,c){console.log(o.tab?"from a content script:"+o.tab.url:"from the extension"),"what is the current url?"==t.question?c({url:o.tab.url}):"addstorage"==t.question&&($.ajax(t.u,{success:function(e){var o=$(e).find(".piece-text-container").find("h2").html();console.log(o);try{localStorage.setItem(t.u,o),console.log(localStorage)}catch(c){"QUOTE_EXCEEDED_ERR"==c&&alert("Quote exceeded!")}}}),c({eval:"success! added"}))}),chrome.browserAction.onClicked.addListener(function(e){chrome.tabs.getAllInWindow(void 0,function(e){for(var t=!0,o=0,c;c=e[o];o++)"jesture_page.html"==c.url.split("/")[3]&&(chrome.tabs.update(c.id,{selected:!0}),t=!1);t&&chrome.tabs.create({url:"jesture_page.html"})})});